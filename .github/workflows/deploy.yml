# This file is generated from build.rcl using RCL 9e8f729c19e.
{
  "jobs": {
    "build": {
      "runs-on": "ubuntu-22.04",
      "steps": [
        {"name": "Checkout", "uses": "actions/checkout@v3.5.3"},
        {
          "name": "Cache PureScript",
          "uses": "actions/cache@v3.3.1",
          "with": {
            "key": "spago-${{ hashFiles('app/spago.dhall', 'app/packages.dhall', 'flake.lock') }}",
            "path": "app/.spago",
            "restore-keys": "spago-"
          }
        },
        {
          "name": "Install Nix",
          "uses": "cachix/install-nix-action@v25",
          "with": {
            "install_url": "https://releases.nixos.org/nix/nix-2.17.0/install",
            "nix_path": "nixpkgs=channel:nixos-unstable"
          }
        },
        {"name": "Build", "run": "nix develop --command make"},
        {
          "name": "Deploy",
          "uses": "peaceiris/actions-gh-pages@v3.6.1",
          "with": {
            "commit_message": "${{ github.ref }}",
            "github_token": "${{ secrets.GITHUB_TOKEN }}",
            "publish_dir": "out"
          }
        }
      ]
    }
  },
  "name": "Deploy",
  "on": {"push": {"tags": ["v*"]}}
}
